---
config:
  layout: elk
---
flowchart TD
 subgraph UserInteraction["User Interaction Layer"]
        B{"Initial Query Analysis"}
        A["User Input"]
        D["Search Execution"]
        C["Dynamic Inquiry System"]
  end
 subgraph DynamicInquiry["Dynamic Inquiry Process"]
        C1["Generate Relevant Questions"]
        C2["Present Questions to User"]
        C3{"Evaluate Responses"}
  end
 subgraph SearchSystem["Search and Retrieval System"]
        D1["Query Preprocessing"]
        D2["Execute API Calls"]
        D3{"Validate Results"}
        E["Product List Generation"]
        D4["Fallback Search"]
  end
 subgraph ProductAnalysis["Product Analysis Layer"]
        E1{"User Selection"}
        F["Detailed Product View"]
        G["Comparison Engine"]
  end
 subgraph ComparisonEngine["Comparison Process"]
        G1["Extract Key Features"]
        G2["Generate Comparison Matrix"]
        G3["Highlight Differences"]
        G4["Present Results"]
  end
 subgraph DetailedView["Detailed Product Process"]
        F1["Fetch Complete Specs"]
        F2["Generate Product Summary"]
        F3["Display Reviews"]
  end
 subgraph UserFeedback["Feedback Loop"]
        H1{"Satisfaction Check"}
        H["User Feedback"]
        I["Session End"]
  end
    A --> B
    B -- Complete Query --> D
    B -- Incomplete Query --> C
    C --> C1
    C1 --> C2
    C2 --> C3
    C3 -- Complete --> D
    C3 -- Needs Clarification --> C1
    D --> D1
    D1 --> D2
    D2 --> D3
    D3 -- Success --> E
    D3 -- Failure --> D4
    D4 --> E
    E --> E1
    E1 -- Single Product --> F
    E1 -- Multiple Products --> G
    G --> G1
    G1 --> G2
    G2 --> G3
    G3 --> G4
    F --> F1
    F1 --> F2
    F2 --> F3
    H --> H1
    H1 -- Satisfied --> I
    H1 -- Not Satisfied --> B
    ProductAnalysis --> H
    F3 --> H
    G4 --> H
